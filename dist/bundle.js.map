{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://fiber/./src/react/Component/index.js","webpack://fiber/./src/react/CreateElement/index.js","webpack://fiber/./src/react/DOM/createDOMElement.js","webpack://fiber/./src/react/DOM/index.js","webpack://fiber/./src/react/DOM/updateNodeElement.js","webpack://fiber/./src/react/Misc/Arrayed/index.js","webpack://fiber/./src/react/Misc/CreateReactInstance/index.js","webpack://fiber/./src/react/Misc/CreateStateNode/index.js","webpack://fiber/./src/react/Misc/CreateTaskQueue/index.js","webpack://fiber/./src/react/Misc/GetTag/index.js","webpack://fiber/./src/react/Misc/index.js","webpack://fiber/./src/react/index.js","webpack://fiber/./src/react/reconciliation/index.js","webpack://fiber/webpack/bootstrap","webpack://fiber/webpack/runtime/define property getters","webpack://fiber/webpack/runtime/hasOwnProperty shorthand","webpack://fiber/webpack/runtime/make namespace object","webpack://fiber/./src/index.js"],"sourcesContent":["export default class Component {\n    constructor(props) {\n        this.props = props\n    }\n}\n","export default function createElement(type, props, ...children) {\n    const childElements = [].concat(...children).reduce((result, child) => {\n        // true false null 这些值在 react 中是不会渲染到 html 的\n        if (child !== true && child !== false && child !== null) {\n            if (child instanceof Object) {\n                // 如果是一个对象， 则说明原来是一个 <span>aaa</span> 结构，babel已经转换为 vDOM了\n                result.push(child)\n            } else {\n                // 如果是一个文本，需要转换为 vDOM 的结构\n                result.push(createElement('text', {textContent: child}))\n            }\n        }\n        return result\n    }, [])\n    return {\n        type,\n        // 将父级元素传递过来的 children 合并到 props 上\n        props: Object.assign({children: childElements}, props),\n        // children: childElements\n    }\n}\n","import updateNodeElement from \"./updateNodeElement\";\n\nexport default function createDOMElement(virtualDOM){\n    let newElement = null\n    if (virtualDOM.type === 'text') {\n        // 文本节点，调用 createTextElement\n        newElement = document.createTextNode(virtualDOM.props.textContent)\n    } else {\n        // 元素节点，调用 createElement\n        newElement = document.createElement(virtualDOM.type)\n        updateNodeElement(newElement, virtualDOM)\n    }\n\n    return newElement\n}\n","export {default as createDOMElement} from './createDOMElement'\nexport {default as updateNodeElement} from './updateNodeElement'\n","export default function updateNodeElement(newElement, virtualDOM, oldVirtualDOM = {}) {\n    const newProps = virtualDOM.props || {};\n    const oldProps = oldVirtualDOM.props || {};\n\n    /**\n     * 增加文本处理能力\n     * 当文本被替换的时候，不只是替换文本\n     * 可能文本的容器从原来的 p 标签修改为了 span 或者 div 或者其他\n     * 此时如果调用 replaceChild 去替换 text 会导致意料之外的异常\n     */\n    if (virtualDOM.type === 'text') {\n        if (newProps.textContent !== oldProps.textContent) {\n            // 如果新节点的父级的类型 与 旧节点的父级的类型 不一致\n            if (virtualDOM.parent.type !== oldVirtualDOM.parent.type) {\n                virtualDOM.parent.stateNode.appendChild(\n                    document.createTextNode(newProps.textContent)\n                )\n            } else {\n                // 父级类型一直才能直接 replace\n                virtualDOM.parent.stateNode.replaceChild(\n                    document.createTextNode(newProps.textContent),\n                    oldVirtualDOM.stateNode\n                )\n            }\n\n        }\n        return\n    }\n\n    Object.keys(newProps).forEach(propName => {\n        // 获取存储在 props 中的属性值\n        const newPropsValue = newProps[propName]\n        const oldPropsValue = oldProps[propName]\n\n        if (newPropsValue !== oldPropsValue) {\n            // 判断是否是事件属性 onClick => click\n            if (propName.slice(0, 2) === 'on') {\n                // 拿到 事件名称 'click'\n                const eventName = propName.toLowerCase().slice(2);\n                // 给元素添加事件监听\n                newElement.addEventListener(eventName, newPropsValue)\n                // addEventListener 可以添加多个监听\n                // 在此处如果更新元素的事件，要移除之前的事件处理函数\n                if (oldPropsValue) {\n                    newElement.removeEventListener(eventName, oldPropsValue)\n                }\n            } else if (propName === 'value' || propName === 'checked') {\n                // 如果属性名称是表单相关的 value 或这 checked\n                // 通过 ele.value = xx 的方式设置\n                newElement[propName] = newPropsValue\n            } else if (propName !== 'children') {\n                /**\n                 * children 也在 props 属性中，children 会在上一层做处理，\n                 * 这里只对某个 native 元素做处理，添加事件、属性等\n                 */\n\n                // 如果属性名是 className 则给元素设置 class\n                if (propName === 'className') {\n                    newElement.setAttribute('class', newPropsValue)\n                } else {\n                    // 其他熟悉则通过 setAttribute 直接设置\n                    newElement.setAttribute(propName, newPropsValue)\n                }\n            }\n        }\n    })\n\n    /**\n     * 如何判断属性被删除？\n     * 这里有两个 virtualDOM，一个新的一个旧的\n     * 被删除的属性，在 newProps 中没有，oldProps 中存在\n     * 因此，两相对比可以知道某个属性是否被删除\n     * - 如果被删除的属性是事件， removeEventListener 移除之\n     * - 如果被删除的属性是'属性'，removeAttribute 移除之\n     */\n    // 处理属性被删除的情况\n    Object.keys(oldProps).forEach(propName => {\n        const newPropsValue = newProps[propName]\n        const oldPropsValue = oldProps[propName]\n        if (!newPropsValue) {\n            // 属性被删除了\n            if (propName.slice(0, 2) === 'on') {\n                // 如果是事件，移除对应的事件监听\n                const eventName = propName.toLowerCase().slice(2)\n                newElement.removeEventListener(eventName, oldPropsValue)\n            } else if (propName !== 'children') {\n                // 这里一样要排除 children 的情况\n                newElement.removeAttribute(propName)\n            }\n        }\n    })\n}\n","export default arg => Array.isArray(arg) ? arg : [arg];\n","const createReactInstance = fiber => {\n    let instance = null\n    if (fiber.tag === 'class_component') {\n        instance = new fiber.type(fiber.props)\n    } else {\n        instance = fiber.type\n    }\n    return instance\n}\n\nexport default createReactInstance\n","import { createDOMElement } from '../../DOM'\nimport {createReactInstance} from \"../index\";\n\nconst createStateNode = (fiber) => {\n    if(fiber.tag === 'host_component'){\n        return createDOMElement(fiber)\n    } else {\n        return createReactInstance(fiber)\n    }\n}\n\nexport default createStateNode\n","const createTaskQueue = () => {\n    const taskQueue = []\n    return {\n        push: item => taskQueue.push(item),\n        pop: () => taskQueue.shift(),\n        isEmpty: () => taskQueue.length === 0\n    }\n}\n\nexport default createTaskQueue\n","import Component from \"../../Component\";\nconst getTag = (vdom) => {\n    if (typeof vdom.type === 'string'){\n        return 'host_component'\n    } else if (Object.getPrototypeOf(vdom.type) === Component) {\n        return 'class_component'\n    } else {\n        return 'function_component'\n    }\n}\n\nexport default getTag\n","export {default as createTaskQueue} from './CreateTaskQueue'\nexport {default as arrayed} from './Arrayed'\nexport {default as createStateNode} from './CreateStateNode'\nexport {default as getTag} from './GetTag'\nexport {default as createReactInstance} from './CreateReactInstance'\n","import createElement from \"./CreateElement\";\nimport {render} from \"./reconciliation\";\nimport Component from \"./Component\";\n\nexport default {\n    createElement,\n    render,\n    Component\n}\n","import {arrayed, createStateNode, createTaskQueue, getTag} from \"../Misc\";\nimport {updateNodeElement} from \"../DOM\";\n\n/**\n * 阶段一的任务：为每一个节点构建 fiber 对象\n * 阶段二的任务：将所有的 fiber 对象构建完成之后加入最外层fiber的effects数组中\n */\nconst taskQueue = createTaskQueue()\n\nlet subTask = null\nlet pendingCommit = null\n\nconst commitAllWork = fiber => {\n    /**\n     * 所有的节点变化都被收集到了 effects 中\n     * 各个节点的层级被抹平了\n     * 但是因为 fiber 元素中存储了 parent、sibling这些信息\n     * 所以即使层级被抹平了，也不会影响到节点的更新、删除、修改\n     */\n    fiber.effects.forEach(child => {\n        if (child.effectTag === 'delete') {\n            child.parent.stateNode.removeChild(child.stateNode)\n        } else if (child.effectTag === 'update') {\n            if (child.type === child.alternate.type) {\n                // 节点类型相同\n                updateNodeElement(child.stateNode, child, child.alternate)\n            } else {\n                // 节点类型不同, 用新的节点去替换掉原来的旧节点\n                child.parent.stateNode.replaceChild(child.stateNode, child.alternate.stateNode)\n            }\n        } else if (child.effectTag === 'placement') {\n            let fiber = child\n            let parentFiber = child.parent\n            /**\n             * 如果当前child 是类组件的最外层节点，假设是A\n             * 它不能被挂载到 <A/> 上，应该被挂载到 A 的父级 html 标签(host_component)\n             * 如果多个组件嵌套，那就一直往上找\n             */\n            while (parentFiber.tag === 'class_component' || parentFiber.tag === 'function_component') {\n                parentFiber = parentFiber.parent\n            }\n            if (fiber.tag === 'host_component') {\n                parentFiber.stateNode.appendChild(child.stateNode)\n            }\n        }\n    })\n\n    /**\n     * 备份旧的 fiber\n     */\n\n    fiber.stateNode.__rootFiberContainer = fiber\n\n\n    console.log(fiber)\n}\n\nconst getFirstTask = () => {\n    // 获取任务\n    const task = taskQueue.pop()\n    // 返回最外层节点的 fiber 对象\n    return {\n        props: task.props,\n        stateNode: task.dom,\n        tag: 'host_root',\n        effects: [],\n        child: null,\n        alternate: task.dom.__rootFiberContainer\n    }\n}\n\n/**\n * fiber 子节点的构建原则\n * - 抵达左侧的叶子节点\n * - 首先判断这个节点有没有同级，有则构建同级，无则退回父级， 重复此步骤，直到回到根节点\n *\n */\n\nconst reconcileChildren = (fiber, children) => {\n    /**\n     * children 可能是对象或者数组\n     * 如果是对象，放入数组中返回\n     */\n    const arrayedChildren = arrayed(children)\n\n    let index = 0\n    let numberOfElements = arrayedChildren.length\n    let newFiber = null\n    let prevFiber = null\n    let element = null\n    let alternate = null\n\n    /**\n     * element 和 alternate 一一对应新旧节点\n     * 如果 fiber 存在 alternate，说明这个 fiber 有备份\n     */\n\n    if (fiber.alternate && fiber.alternate.child) {\n        // fiber 的 child 是第一个子节点\n        alternate = fiber.alternate.child\n    }\n\n    while (index < numberOfElements || alternate) {\n        element = arrayedChildren[index]\n        if (!element && alternate) {\n            alternate.effectTag = 'delete'\n            fiber.effects.push(alternate)\n        } else if (element && alternate) {\n            // 更新\n            newFiber = {\n                type: element.type,\n                props: element.props,\n                tag: getTag(element),\n                effects: [],\n                effectTag: 'update',\n                stateNode: null,\n                parent: fiber,\n                alternate\n            }\n            if (element.type === alternate.type) {\n                // 更新的节点与之前的类型相同\n                // 将 alternate.stateNode\n                newFiber.stateNode = alternate.stateNode\n            } else {\n                // 更新的节点与之前的类型不同，重新创建一个节点\n                newFiber.stateNode = createStateNode(newFiber)\n            }\n        } else if (element && !alternate) {\n            // 初次渲染\n            newFiber = {\n                type: element.type,\n                props: element.props,\n                tag: getTag(element),\n                effects: [],\n                effectTag: 'placement',\n                stateNode: null,\n                parent: fiber\n            }\n\n            newFiber.stateNode = createStateNode(newFiber)\n        }\n        // 在 fiber 中，只有第一个是父级的子节点，其他的子节点都应该是第一个子节点的兄弟节点\n        if (index === 0) {\n            fiber.child = newFiber\n        } else if (element) {\n            prevFiber.sibling = newFiber\n        }\n\n        if (alternate && alternate.sibling) {\n            alternate = alternate.sibling\n        } else {\n            alternate = null\n        }\n\n        prevFiber = newFiber\n        index++\n    }\n}\n\nconst executeTask = fiber => {\n    /**\n     * 构建子级 fiber 对象\n     */\n    if (fiber.tag === 'class_component') {\n        reconcileChildren(fiber, fiber.stateNode.render())\n    } else if (fiber.tag === 'function_component') {\n        reconcileChildren(fiber, fiber.stateNode(fiber.props))\n    } else {\n        reconcileChildren(fiber, fiber.props.children)\n    }\n\n    /**\n     * 如果子级存在，返回子级\n     * 将这个子级当作父级，构建这个父级下的子级\n     */\n    if (fiber.child) {\n        return fiber.child\n    }\n\n    let currentExecutingFiber = fiber\n    while (currentExecutingFiber.parent) {\n        /**\n         * 从左侧的最后一个父节点开始\n         * 把所有子节点的 fiber 对对象收集到这个父节点的 effects 数组中\n         * 直到退回根节点，这个根节点的 effects 数组中会有所有的 fiber\n         */\n        currentExecutingFiber.parent.effects = currentExecutingFiber.parent.effects.concat(\n            currentExecutingFiber.effects.concat([currentExecutingFiber])\n        )\n        /**\n         * 没有子节点则判断有无同级\n         * 有同级则返回同级\n         */\n        if (currentExecutingFiber.sibling) {\n            return currentExecutingFiber.sibling\n        }\n        // 没有同级之后回退到当前节点的父节点\n        currentExecutingFiber = currentExecutingFiber.parent\n    }\n\n    pendingCommit = currentExecutingFiber;\n}\n\nconst workLoop = (deadline) => {\n    /**\n     * 任务不存在，则去队列中获取\n     */\n    if (!subTask) {\n        subTask = getFirstTask()\n    }\n\n    /**\n     * 有任务其浏览器有空闲时间\n     * 调用 executeTask 执行\n     */\n    while (subTask && deadline.timeRemaining() > 1) {\n        subTask = executeTask(subTask)\n    }\n\n    if (pendingCommit) {\n        commitAllWork(pendingCommit)\n    }\n}\n\nconst performTask = (deadline) => {\n    // 执行任务\n    workLoop(deadline)\n    // 判断任务是否存在，队列里面是否还有未执行任务\n    // 如果有则让浏览器继续在空闲事件执行\n    if (subTask || !taskQueue.isEmpty()) {\n        requestIdleCallback(performTask)\n    }\n}\n\nexport const render = (element, dom) => {\n    /**\n     * 1、向任务队列中添加任务\n     * 2、指定在浏览器空闲的时候执行\n     *\n     * 任务：通过 vdom 构建 fiber 对象\n     */\n\n    taskQueue.push({\n        dom,\n        props: {children: element}\n    })\n\n    requestIdleCallback(performTask)\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React from './react'\nimport {render} from \"./react/reconciliation\";\nimport Component from \"./react/Component\";\n\nconst root = document.getElementById('root')\n\nconst jsx = (\n    <div>\n        <p>Hello React Fiber</p>\n        <div>\n            <p>Fiber</p>\n            <span style=\"color: red\">&hearts;</span>\n        </div>\n    </div>\n)\n\nconst jsx2 = (\n    <div>\n        <p>Hello React Fiber</p>\n        <div>\n            <p>Fiber 111</p>\n        </div>\n    </div>\n)\n// render(jsx, root)\n\n\nclass Greeting extends Component{\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div>\n                {this.props.title}\n            </div>\n        );\n    }\n}\n\n// render(<Greeting title=\"奥力给\"/>, root)\n\n\nfunction FunctionComponent (props){\n    return <div>{props.title}, FunctionComponent</div>\n}\n\n\n// render(<FunctionComponent title=\"Hello\"/>, root)\n\n\n\nrender(jsx, root)\nsetTimeout(() => {\n    render(jsx2, root)\n}, 2000)\n"],"names":["Component","props","createElement","type","children","childElements","concat","reduce","result","child","Object","push","textContent","assign","updateNodeElement","createDOMElement","virtualDOM","newElement","document","createTextNode","default","oldVirtualDOM","newProps","oldProps","parent","stateNode","appendChild","replaceChild","keys","forEach","propName","newPropsValue","oldPropsValue","slice","eventName","toLowerCase","addEventListener","removeEventListener","setAttribute","removeAttribute","arg","Array","isArray","createReactInstance","fiber","instance","tag","createStateNode","createTaskQueue","taskQueue","item","pop","shift","isEmpty","length","getTag","vdom","getPrototypeOf","arrayed","render","subTask","pendingCommit","commitAllWork","effects","effectTag","removeChild","alternate","parentFiber","__rootFiberContainer","console","log","getFirstTask","task","dom","reconcileChildren","arrayedChildren","index","numberOfElements","newFiber","prevFiber","element","sibling","executeTask","currentExecutingFiber","workLoop","deadline","timeRemaining","performTask","requestIdleCallback","React","root","getElementById","jsx","jsx2","Greeting","title","FunctionComponent","setTimeout"],"sourceRoot":""}